# Use Cases MiniHub

## Аутентификация

### Регистрация и вход

1. **Register** — регистрация нового пользователя

    * Входные данные: `email`, `password`
    * Возвращает: `access_token`, `refresh_token`

2. **Login** — вход существующего пользователя

    * Входные данные: `email`, `password`
    * Возвращает: `access_token`, `refresh_token`

3. **RefreshToken** — обновление access token

    * Входные данные: `refresh_token`
    * Возвращает: новые `access_token` и `refresh_token`

4. **Logout** — выход из системы

    * Контекст: выполняется от имени аутентифицированного пользователя
    * Входные данные: `refresh_token`
    * Действие: инвалидация сессии

---

## Операции с закладками

### CRUD закладок

1. **CreateBookmark** — создать новую закладку

    * Контекст: пользователь определяется по JWT (`user_id` берётся из контекста)
    * Входные данные: `url`, `title`, `description` (опционально), `collection_id` (опционально), `tag_ids[]` (может быть пустым)
    * Возвращает: `bookmark_id`

2. **GetBookmark** — получить закладку по ID

    * Контекст: доступ только к собственным закладкам пользователя
    * Входные данные: `bookmark_id`
    * Возвращает: объект `Bookmark`

3. **GetAllBookmarks** — список закладок

    * Контекст: доступ только к собственным закладкам пользователя
    * Входные данные: `filters` (необязательно) (`collection_id`, `tags[]`), `pagination` (необязательно) (`skip`, `page`, `limit`)
    * Возвращает: массив `Bookmark`, `total_count`

4. **UpdateBookmark** — обновить закладку

    * Контекст: доступ только к собственным закладкам пользователя
    * Входные данные: `bookmark_id`, `url`, `title`, `description`, `collection_id` (необязательно), `tag_ids[]` (необязательно)
    * Возвращает: `Status Code 200`

5. **DeleteBookmark** — удалить закладку

    * Контекст: доступ только к собственным закладкам пользователя
    * Входные данные: `bookmark_id`
    * Возвращает: `Status Code 200`

---

## Операции с коллекциями

### CRUD коллекций

1. **CreateCollection** — создать коллекцию

    * Контекст: пользователь определяется по JWT (`user_id` берётся из контекста)
    * Входные данные: `name`, `color`
    * Возвращает: `collection_id`

2. **GetCollection** — получить коллекцию

    * Контекст: доступ только к собственным коллекциям пользователя
    * Входные данные: `collection_id`
    * Возвращает: объект `Collection`

3. **GetAllCollections** — список коллекций

    * Контекст: доступ только к собственным коллекциям пользователя
    * Возвращает: массив `Collection`, `total_count`

4. **UpdateCollection** — обновить

    * Контекст: доступ только к собственным коллекциям пользователя
    * Входные данные: `collection_id`, `name`, `color`
    * Возвращает: `Status Code 200`

5. **DeleteCollection** — удалить

    * Контекст: доступ только к собственным коллекциям пользователя
    * Входные данные: `collection_id`
    * Действие: удаление коллекции, закладки остаются (`collection_id` = null)
    * Возвращает: `Status Code 200`

---

## Операции с профилем

### CRUD профиля

1. **GetProfile** — получить профиль

    * Контекст: пользователь определяется по JWT (`user_id` берётся из контекста)
    * Входные данные: отсутствуют
    * Возвращает: объект `Profile`

2. **UpdateProfile** — обновить профиль

    * Контекст: доступ только к собственному профилю пользователя
    * Входные данные: `display_name`, `avatar_url`, `bio`, `timezone`
    * Возвращает: `Status Code 200`

3. **DeleteProfile** — удалить профиль (и пользователя)

    * Контекст: доступ только к собственному профилю пользователя
    * Действие: каскадное удаление всех связанных данных
    * Возвращает: `Status Code 200`

---

## Операции с тегами

### CRUD тегов

1. **CreateTag** — создать тег

    * Контекст: разрешено только авторизованным пользователям
    * Входные данные: `name`
    * Возвращает: идентификатор `Tag`

2. **ListTags** — список тегов

    * Контекст: доступ только к собственным тегам пользователя
    * Входные данные: отсутствуют
    * Возвращает: массив `Tag`, `total_count`

3. **RenameTag** — переименовать тег

    * Контекст: доступ только к собственным тегам пользователя
    * Входные данные: `tag_id`, `new_name`
    * Возвращает: `Status Code 200`

4. **DeleteTag** — удалить тег

    * Контекст: доступ только к собственным тегам пользователя
    * Входные данные: `tag_id`
    * Действие: удаление тега и всех связей с закладками
    * Возвращает: `Status Code 200`

---

## Дополнительные операции (позже)

### Массовые операции

* **BulkAddTags** — добавление тегов к нескольким закладкам
* **BulkMoveToCollection** — перемещение закладок в коллекцию
* **BulkDelete** — массовое удаление закладок

### Поиск и фильтрация

* **SearchBookmarks** — полнотекстовый поиск по `title`, `description`, `url`
* **GetBookmarksByTag** — закладки по тегу
* **GetBookmarksByCollection** — закладки в коллекции

### Статистика

* **GetUserStats** — статистика пользователя
* **GetPopularTags** — популярные теги